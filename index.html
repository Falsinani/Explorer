<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Web File Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: system-ui, sans-serif;
      direction: rtl;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 15px;
      background: #222;
      font-size: 20px;
      font-weight: 600;
      text-align: center;
    }
    #picker {
      padding: 15px;
      background: #181818;
      text-align: center;
    }
    input[type="file"] {
      padding: 10px;
      background: #00c853;
      color: #fff;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }
    #fileList {
      flex: 1;
      overflow-y: auto;
      border-top: 1px solid #333;
    }
    .item {
      padding: 10px;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }
    .item:hover {
      background: #252525;
    }
    #viewer {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      display: none;
      flex-direction: column;
      z-index: 10;
    }
    #viewerContent {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: auto;
      padding: 20px;
    }
    #closeBtn {
      background: #d50000;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      margin: 15px auto;
      display: block;
      font-size: 16px;
    }
  </style>
</head>
<body>

<header>ğŸ“„ Web File Viewer</header>

<div id="picker">
  <input type="file" id="fileInput" multiple>
</div>

<div id="fileList"></div>

<!-- Viewer -->
<div id="viewer">
  <button id="closeBtn">Ø¥ØºÙ„Ø§Ù‚</button>
  <div id="viewerContent"></div>
</div>

<script>
const fileInput = document.getElementById("fileInput");
const fileList = document.getElementById("fileList");
const viewer = document.getElementById("viewer");
const viewerContent = document.getElementById("viewerContent");
const closeBtn = document.getElementById("closeBtn");

let selectedFiles = [];

// Show file list
fileInput.addEventListener("change", (e) => {
  selectedFiles = Array.from(e.target.files);
  fileList.innerHTML = "";

  selectedFiles.forEach((file, index) => {
    const div = document.createElement("div");
    div.className = "item";
    div.textContent = `${file.name} - ${Math.round(file.size/1024)} KB`;
    div.onclick = () => viewFile(file);
    fileList.appendChild(div);
  });
});

// View file
function viewFile(file) {
  viewer.style.display = "flex";
  viewerContent.innerHTML = "";

  const type = file.type;

  // Image
  if (type.startsWith("image/")) {
    const img = document.createElement("img");
    img.src = URL.createObjectURL(file);
    img.style.maxWidth = "100%";
    img.style.maxHeight = "100%";
    viewerContent.appendChild(img);
  }

  // PDF
  else if (type === "application/pdf") {
    const iframe = document.createElement("iframe");
    iframe.src = URL.createObjectURL(file);
    iframe.style.width = "100%";
    iframe.style.height = "100%";
    viewerContent.appendChild(iframe);
  }

  // Video
  else if (type.startsWith("video/")) {
    const video = document.createElement("video");
    video.src = URL.createObjectURL(file);
    video.controls = true;
    video.style.maxWidth = "100%";
    viewerContent.appendChild(video);
  }

  // Audio
  else if (type.startsWith("audio/")) {
    const audio = document.createElement("audio");
    audio.src = URL.createObjectURL(file);
    audio.controls = true;
    audio.style.width = "100%";
    viewerContent.appendChild(audio);
  }

  // Text-based files
  else if (type.startsWith("text/") || file.name.endsWith(".json") || file.name.endsWith(".html") || file.name.endsWith(".js")) {
    const reader = new FileReader();
    reader.onload = () => {
      const pre = document.createElement("pre");
      pre.textContent = reader.result;
      pre.style.whiteSpace = "pre-wrap";
      pre.style.fontSize = "14px";
      viewerContent.appendChild(pre);
    };
    reader.readAsText(file);
  }

  // Unsupported â†’ Download instead
  else {
    const msg = document.createElement("div");
    msg.innerHTML = `
      <p>Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª.</p>
      <a href="${URL.createObjectURL(file)}" download="${file.name}" style="color:#4fc3f7;">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</a>
    `;
    viewerContent.appendChild(msg);
  }
}

// Close viewer
closeBtn.onclick = () => {
  viewer.style.display = "none";
  viewerContent.innerHTML = "";
};
</script>

</body>
</html>
