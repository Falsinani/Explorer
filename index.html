<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web File Explorer</title>

<style>
body {
  font-family: sans-serif;
  margin: 0;
  background: #111;
  color: #fff;
}
header {
  background: #222;
  padding: 10px;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  border-bottom: 1px solid #444;
}
#container {
  display: flex;
  height: calc(100vh - 50px);
}
#sidebar {
  width: 250px;
  background: #181818;
  padding: 10px;
  border-left: 1px solid #333;
  overflow-y: auto;
}
#content {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
}
button {
  padding: 10px 15px;
  background: #00c853;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  margin-bottom: 10px;
}
button:hover {
  background: #00a843;
}
.item {
  padding: 8px;
  border-bottom: 1px solid #333;
  cursor: pointer;
}
.item:hover {
  background: #333;
}
.folder { color: #4fc3f7; }
.file { color: #fff59d; }
</style>

</head>
<body>

<header>ğŸ“ Web File Explorer</header>

<div id="container">

  <div id="sidebar">
    <button onclick="pickFolder()">Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¬Ù„Ø¯</button>
    <div id="tree"></div>
  </div>

  <div id="content">
    <h2 id="path">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¬Ù„Ø¯ Ù…Ø­Ø¯Ø¯</h2>
    <div id="list"></div>
  </div>

</div>

<script>
let rootHandle = null;
let currentHandle = null;

/* Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¬Ù„Ø¯ */
async function pickFolder() {
  try {
    rootHandle = await window.showDirectoryPicker();
    currentHandle = rootHandle;
    displayFolder(rootHandle);
  } catch (e) {
    alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù„Ø¯");
  }
}

/* Ø¹Ø±Ø¶ Ù…Ø­ØªÙˆÙ‰ Ù…Ø¬Ù„Ø¯ */
async function displayFolder(dirHandle) {
  currentHandle = dirHandle;
  document.getElementById("path").innerText = "ğŸ“‚ " + dirHandle.name;

  let list = document.getElementById("list");
  list.innerHTML = "";

  for await (const [name, handle] of dirHandle.entries()) {
    let div = document.createElement("div");
    div.className = "item";

    if (handle.kind === "directory") {
      div.innerHTML = "ğŸ“ <span class='folder'>" + name + "</span>";
      div.onclick = () => displayFolder(handle);
    } else {
      div.innerHTML = "ğŸ“„ <span class='file'>" + name + "</span>";
      div.onclick = () => openFile(handle);
    }

    list.appendChild(div);
  }
}

/* ÙØªØ­ Ù…Ù„Ù */
async function openFile(fileHandle) {
  const file = await fileHandle.getFile();
  const url = URL.createObjectURL(file);

  window.open(url, "_blank");
}
</script>

</body>
</html>
